/**
 * TABLE RESPONSIVE LAYOUT FIX
 * Improves table layout on all devices and fixes horizontal scrolling issues
 */

/* Make all tables responsive and add horizontal scrolling when needed */
.table-responsive {
  overflow-x: auto !important; /* Enable horizontal scrolling */
  width: 100% !important;
  margin-bottom: 1rem !important;
}

/* Apply reasonable column widths */
.table th, .table td {
  min-width: 80px; /* Minimum width for any column */
  max-width: 350px; /* Maximum width prevents columns from getting too wide */
  vertical-align: middle !important; /* Center content vertically */
  padding: 0.5rem 0.75rem !important; /* Smaller padding for tighter layout */
}

/* Set specific column width constraints */
.table th:first-child,
.table td:first-child {
  min-width: 120px; /* First column (often name/ID) needs more space */
}

/* Actions column should be fixed width - reduced width */
.table th:last-child,
.table td:last-child {
  width: 110px !important; /* Reduced from 160px for action buttons */
  min-width: 110px !important;
  white-space: nowrap; /* Prevent buttons from wrapping */
}

/* Allow text to wrap rather than overflow */
.table th, .table td {
  white-space: normal !important; /* Allow text to wrap */
  word-break: break-word !important; /* Break long words */
  hyphens: auto !important; /* Enable hyphenation */
}

/* Short text columns shouldn't expand too much */
.table .column-narrow,
.table th.column-narrow,
.table td.column-narrow {
  width: 80px !important;
  max-width: 80px !important;
  text-align: center !important;
}

/* Medium width columns */
.table .column-medium {
  width: 150px !important;
  max-width: 150px !important;
}

/* Style specific columns by data type */
.table .column-name {
  min-width: 150px !important;
}

.table .column-email {
  min-width: 180px !important;
}

.table .column-description {
  min-width: 200px !important;
}

/* Even narrower column for just badges or simple status indicators */
.table .column-badge,
.table th.column-badge,
.table td.column-badge {
  width: 60px !important;
  max-width: 60px !important;
  text-align: center !important;
}

/* Multi-line cell content for name fields */
.table .multi-line-name {
  display: flex !important;
  flex-direction: column !important;
  gap: 2px !important;
}

.table .name-part {
  display: block !important;
  line-height: 1.2 !important;
}

.table .name-part.first-name {
  font-weight: 500 !important;
}

.table .name-part.last-name {
  font-size: 0.9em !important;
  color: #666 !important;
}

/* Status badges should align center */
.table .badge {
  display: inline-block !important;
  min-width: 90px !important;
  text-align: center !important;
}

/* Button group for action buttons */
.table .btn-group {
  display: flex !important;
  flex-wrap: nowrap !important;
  gap: 0.25rem !important;
}

/* User management specific adjustments */
table th:nth-child(5),  /* Admin column - usually the 5th column */
table td:nth-child(5) {
  width: 60px !important;
  max-width: 60px !important;
  text-align: center !important;
}

table th:nth-child(6),  /* Sites column - usually the 6th column */
table td:nth-child(6) {
  width: 60px !important;
  max-width: 60px !important;
  text-align: center !important;
}

/* For smaller screens, stack things more and reduce padding further */
@media (max-width: 767.98px) {
  .table th, .table td {
    padding: 0.375rem 0.5rem !important; /* Even smaller padding */
    font-size: 0.9rem !important; /* Smaller font */
  }
  
  /* Stack the buttons in the action column */
  .table td:last-child .btn-group {
    flex-direction: column !important;
    align-items: flex-start !important;
  }
  
  .table td:last-child .btn {
    margin-bottom: 0.25rem !important;
    padding: 0.25rem 0.5rem !important; /* Smaller padding for buttons */
    font-size: 0.75rem !important;
  }
}

/* On extremely small screens, show minimal content */
@media (max-width: 575.98px) {
  /* Hide less important columns */
  .table .column-optional {
    display: none !important;
  }
  
  /* Make the table full width of viewport */
  .table-responsive {
    margin-left: -0.75rem !important;
    margin-right: -0.75rem !important;
    width: calc(100% + 1.5rem) !important;
  }
  
  /* Stack buttons even more compactly */
  .table td:last-child .btn {
    padding: 0.2rem 0.4rem !important;
    font-size: 0.7rem !important;
    line-height: 1 !important;
  }
}
